# .ebextensions/01_staticfiles.config

files:
  "/opt/python/run/venv/bin/postdeploy":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # Collect static files
      cd /opt/python/current/app
      python manage.py collectstatic --noinput

container_commands:
  01_migrate:
    command: "python manage.py migrate --noinput"
  02_collectstatic:
    command: "python manage.py collectstatic --noinput"
  03_create_media_dir:
    command: "mkdir -p /opt/python/current/app/media"
